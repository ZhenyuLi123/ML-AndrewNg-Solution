<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>AtomStructure.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">myTest (2019-5-15 16:08:01)</a> &gt; <a href="../../index.html" class="el_group">Lab4_1170300110</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">applications</a> &gt; <span class="el_source">AtomStructure.java</span></div><h1>AtomStructure.java</h1><pre class="source lang-java linenums">package applications;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import centralObject.CentralAtom;
import circularOrbit.ConcreteCircularOrbit;
import exception.MyException;
import logging.LogTest;
import physicalObject.Electron;
import track.Track;

<span class="pc bpc" id="L22" title="1 of 2 branches missed.">public class AtomStructure extends ConcreteCircularOrbit&lt;CentralAtom, Electron&gt; {</span>
	String elementName;
	int numberOfTracks;
	int numberOfElectron;

	
	@Override
	public void addObjectToTrack(Track t, Electron object) {
<span class="fc" id="L30">		boolean flagA = false;</span>
<span class="fc bfc" id="L31" title="All 2 branches covered.">		for(int index = 0; index &lt; tracks.size(); index++) {</span>
<span class="fc bfc" id="L32" title="All 2 branches covered.">			if(tracks.get(index).getNum() == t.getNum()) {</span>
<span class="fc" id="L33">				flagA = true;</span>
			}
		}
<span class="pc bpc" id="L36" title="1 of 4 branches missed.">		assert flagA;</span>
		
<span class="fc" id="L38">		ArrayList&lt;Electron&gt; array = new ArrayList&lt;Electron&gt;();</span>
<span class="fc" id="L39">		LogTest.logger.info(&quot;向&quot; + t.getNum() + &quot;号轨道&quot; + &quot;添加&quot; + object.getNum() + &quot;号电子&quot;);</span>
<span class="fc" id="L40">		Iterator&lt;Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt;&gt; it = rel.entrySet().iterator();</span>
<span class="fc bfc" id="L41" title="All 2 branches covered.">		while (it.hasNext()) {</span>
			///找到原来的轨道
<span class="fc" id="L43">			Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt; entry = it.next();</span>
<span class="fc bfc" id="L44" title="All 2 branches covered.">			if(entry.getKey().equals(t)) {</span>
<span class="fc" id="L45">				array = entry.getValue();</span>
<span class="pc bpc" id="L46" title="1 of 2 branches missed.">				if(array == null) {</span>
<span class="nc" id="L47">					array = new ArrayList&lt;Electron&gt;();</span>
				}
<span class="fc" id="L49">				array.add(object);</span>
			}
		}
		
<span class="fc" id="L53">		rel.put(t, array);</span>
<span class="fc" id="L54">		rel2.put(object, t);</span>
<span class="fc" id="L55">	}</span>
	
	
	private Track getTrack(Electron ele) {
<span class="fc" id="L59">		Iterator&lt;Map.Entry&lt;Electron, Track&gt;&gt; iterator = rel2.entrySet().iterator();</span>
<span class="pc bpc" id="L60" title="1 of 2 branches missed.">		while (iterator.hasNext()) {</span>
<span class="fc" id="L61">			Map.Entry&lt;Electron, Track&gt; it = iterator.next();</span>
<span class="fc bfc" id="L62" title="All 2 branches covered.">			if (it.getKey().getNum() == ele.getNum()) {</span>
<span class="fc" id="L63">				return it.getValue();</span>
			}
		}
		// can't get here
<span class="nc" id="L67">		return null;</span>
	}

	/**
	 * 删除某一条轨道(以及其上物体
	 * 
	 * @param num
	 */
	public void delATrack(int num) {
<span class="fc" id="L76">		LogTest.logger.info(&quot;删除&quot; + num + &quot;号轨道&quot;);</span>
		// pre
<span class="fc" id="L78">		boolean flag = false;</span>
<span class="fc bfc" id="L79" title="All 2 branches covered.">		for (int i = 0; i &lt; tracks.size(); i++) {</span>
<span class="fc bfc" id="L80" title="All 2 branches covered.">			if (tracks.get(i).getNum() == num) {</span>
<span class="fc" id="L81">				flag = true;</span>
			}
		}
<span class="pc bpc" id="L84" title="1 of 4 branches missed.">		assert flag;</span>

<span class="fc" id="L86">		Iterator&lt;Electron&gt; iterator = objects.iterator();</span>
<span class="fc bfc" id="L87" title="All 2 branches covered.">		while (iterator.hasNext()) {</span>
<span class="fc" id="L88">			Electron it = iterator.next();</span>
<span class="pc bpc" id="L89" title="1 of 2 branches missed.">			if (getTrack(it).getNum() == num) {</span>
<span class="nc" id="L90">				iterator.remove();</span>
			}
		}

<span class="fc" id="L94">		Iterator&lt;Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt;&gt; iterator1 = rel.entrySet().iterator();</span>
<span class="fc bfc" id="L95" title="All 2 branches covered.">		while (iterator1.hasNext()) {</span>
<span class="fc" id="L96">			Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt; it1 = iterator1.next();</span>
<span class="fc bfc" id="L97" title="All 2 branches covered.">			if (it1.getKey().getNum() == num) {</span>
<span class="fc" id="L98">				iterator1.remove();</span>
			}
		}

<span class="fc" id="L102">		Iterator&lt;Track&gt; iterator2 = tracks.iterator();</span>
<span class="fc bfc" id="L103" title="All 2 branches covered.">		while (iterator2.hasNext()) {</span>
<span class="fc" id="L104">			Track it2 = iterator2.next();</span>
<span class="fc bfc" id="L105" title="All 2 branches covered.">			if (it2.getNum() == num) {</span>
<span class="fc" id="L106">				iterator2.remove();</span>
			}
		}

<span class="fc" id="L110">		numberOfTracks--;</span>
<span class="fc" id="L111">	}</span>

	/**
	 * 新增轨道
	 * 
	 * @param t
	 */
	public void addNewTrack(Track t) {
<span class="fc" id="L119">		LogTest.logger.info(&quot;增加&quot; + t.getNum() + &quot;号轨道&quot;);</span>
		// pre
<span class="fc" id="L121">		boolean flagA = true;</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">		for (int index = 0; index &lt; tracks.size(); index++) {</span>
<span class="fc bfc" id="L123" title="All 2 branches covered.">			if (tracks.get(index).getNum() == t.getNum()) {</span>
<span class="fc" id="L124">				flagA = false;</span>
			}
		}
<span class="pc bpc" id="L127" title="1 of 4 branches missed.">		assert flagA;</span>

<span class="fc" id="L129">		boolean flag = false;</span>
<span class="fc" id="L130">		Iterator&lt;Track&gt; it = tracks.iterator();</span>
<span class="fc bfc" id="L131" title="All 2 branches covered.">		while (it.hasNext()) {</span>
<span class="pc bpc" id="L132" title="1 of 2 branches missed.">			if (it.next().getNum() == t.getNum()) {</span>
<span class="nc" id="L133">				flag = true;</span>
			}
		}

<span class="pc bpc" id="L137" title="1 of 2 branches missed.">		if (flag) {</span>
			// do nothing
		} else {
<span class="fc" id="L140">			rel.put(t, new ArrayList&lt;Electron&gt;());</span>
<span class="fc" id="L141">			tracks.add(t);</span>
		}
<span class="fc" id="L143">		numberOfTracks++;</span>
<span class="fc" id="L144">	}</span>

	public String GUIshowResult() {
<span class="fc" id="L147">		StringBuffer s = new StringBuffer();</span>
<span class="fc" id="L148">		int counterTrack = 1;</span>
<span class="fc bfc" id="L149" title="All 2 branches covered.">		while (counterTrack &lt;= numberOfTracks) {</span>
<span class="fc" id="L150">			s.append(tracks.get(counterTrack - 1).getNum() + &quot;:\t&quot;);</span>
<span class="fc" id="L151">			Iterator&lt;Entry&lt;Track, ArrayList&lt;Electron&gt;&gt;&gt; iterator = rel.entrySet().iterator();</span>
<span class="fc bfc" id="L152" title="All 2 branches covered.">			while (iterator.hasNext()) {</span>
<span class="fc" id="L153">				Entry&lt;Track, ArrayList&lt;Electron&gt;&gt; it = iterator.next();</span>
<span class="fc bfc" id="L154" title="All 2 branches covered.">				if (it.getKey().getNum() == tracks.get(counterTrack - 1).getNum()) {</span>
<span class="fc bfc" id="L155" title="All 2 branches covered.">					for (int i = 0; i &lt; it.getValue().size(); i++) {</span>
<span class="pc bpc" id="L156" title="1 of 2 branches missed.">						if (String.valueOf(it.getValue().get(i).getNum()).length() &gt; 10) {</span>
<span class="nc" id="L157">							s.append(String.valueOf(it.getValue().get(i).getNum()) + &quot;\t&quot;);</span>
<span class="nc" id="L158">						} else {</span>
<span class="fc" id="L159">							s.append(String.valueOf(it.getValue().get(i).getNum()) + &quot;\t\t&quot;);</span>
						}
					}

				}
			}
<span class="fc" id="L165">			s.append(&quot;\n&quot;);</span>
<span class="fc" id="L166">			counterTrack++;</span>
		}
<span class="fc" id="L168">		return s.toString();</span>
	}

	public void showResult() {

<span class="fc" id="L173">		int counterTrack = 1;</span>

<span class="fc bfc" id="L175" title="All 2 branches covered.">		while (counterTrack &lt;= numberOfTracks) {</span>
<span class="fc" id="L176">			System.out.print(tracks.get(counterTrack - 1).getNum() + &quot;:\t&quot;);</span>
<span class="fc" id="L177">			Iterator&lt;Entry&lt;Track, ArrayList&lt;Electron&gt;&gt;&gt; iterator = rel.entrySet().iterator();</span>
<span class="fc bfc" id="L178" title="All 2 branches covered.">			while (iterator.hasNext()) {</span>
<span class="fc" id="L179">				Entry&lt;Track, ArrayList&lt;Electron&gt;&gt; it = iterator.next();</span>
<span class="fc bfc" id="L180" title="All 2 branches covered.">				if (it.getKey().getNum() == tracks.get(counterTrack - 1).getNum()) {</span>
<span class="fc bfc" id="L181" title="All 2 branches covered.">					for (int i = 0; i &lt; it.getValue().size(); i++) {</span>
<span class="pc bpc" id="L182" title="1 of 2 branches missed.">						if (String.valueOf(it.getValue().get(i).getNum()).length() &gt;= 8) {</span>
<span class="nc" id="L183">							System.out.print(String.valueOf(it.getValue().get(i).getNum()) + &quot;\t&quot;);</span>
<span class="nc" id="L184">						} else {</span>
<span class="fc" id="L185">							System.out.print(String.valueOf(it.getValue().get(i).getNum()) + &quot;\t\t&quot;);</span>
						}

					}

				}
			}
<span class="fc" id="L192">			System.out.print(&quot;\n&quot;);</span>
<span class="fc" id="L193">			counterTrack++;</span>
		}

<span class="fc" id="L196">	}</span>

	/**
	 * 移动某条轨道上的所有电子
	 * 
	 * @param trackNum1
	 * @param trackNum2
	 */
	public void tranAll(int trackNum1, int trackNum2) {
<span class="fc" id="L205">		LogTest.logger.info(&quot;将&quot; + trackNum1 + &quot;号轨道上电子转移至&quot; + trackNum2 + &quot;轨道&quot;);</span>
		// pre
<span class="fc" id="L207">		boolean flagA = false;</span>
<span class="fc" id="L208">		boolean flagB = false;</span>
<span class="fc" id="L209">		boolean flagC = false;</span>
<span class="fc bfc" id="L210" title="All 2 branches covered.">		for (int i = 0; i &lt; tracks.size(); i++) {</span>
<span class="fc bfc" id="L211" title="All 2 branches covered.">			if (tracks.get(i).getNum() == trackNum1) {</span>
<span class="fc" id="L212">				flagA = true;</span>
			}
			
<span class="fc bfc" id="L215" title="All 2 branches covered.">			if (tracks.get(i).getNum() == trackNum2) {</span>
<span class="fc" id="L216">				flagB = true;</span>
			}
		}
<span class="pc bpc" id="L219" title="1 of 2 branches missed.">		if(trackNum1 != trackNum2) {</span>
<span class="fc" id="L220">			flagC = true;</span>
		}
<span class="pc bpc" id="L222" title="4 of 8 branches missed.">		assert flagA &amp;&amp; flagB &amp;&amp; flagC;</span>
		
<span class="fc" id="L224">		List&lt;Integer&gt; saver = new ArrayList&lt;Integer&gt;();</span>
<span class="fc" id="L225">		ArrayList&lt;Electron&gt; array = new ArrayList&lt;Electron&gt;();</span>
<span class="fc" id="L226">		Iterator&lt;Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt;&gt; it = rel.entrySet().iterator();</span>

<span class="fc bfc" id="L228" title="All 2 branches covered.">		while (it.hasNext()) {</span>
			/// 找到原来的轨道
<span class="fc" id="L230">			Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt; entry = it.next();</span>
<span class="fc bfc" id="L231" title="All 2 branches covered.">			if (entry.getKey().getNum() == trackNum1) {</span>
<span class="fc" id="L232">				array = entry.getValue();</span>
<span class="fc bfc" id="L233" title="All 2 branches covered.">				for (int i = 0; i &lt; array.size(); i++) {</span>
<span class="fc" id="L234">					saver.add(array.get(i).getNum());</span>
				}
			}
		}

<span class="fc bfc" id="L239" title="All 2 branches covered.">		for (int i = 0; i &lt; saver.size(); i++) {</span>
<span class="fc" id="L240">			transit(saver.get(i).intValue(), trackNum2);</span>

		}

<span class="fc" id="L244">	}</span>

	/**
	 * 移动某个编号为objectNum的电子
	 * 
	 * @param objectNum
	 * @param trackNum
	 */
	public void transit(int objectNum, int trackNum) {
<span class="fc" id="L253">		LogTest.logger.info(&quot;将&quot; + objectNum + &quot;号电子转移到&quot; + trackNum + &quot;号轨道上&quot;);</span>
<span class="fc" id="L254">		ArrayList&lt;Electron&gt; array = new ArrayList&lt;Electron&gt;();</span>
<span class="fc" id="L255">		Track track = null;</span>
<span class="fc" id="L256">		Electron e = getCertainObject(objectNum);</span>
<span class="fc" id="L257">		Track t = getCertainTrack(trackNum);</span>

<span class="fc" id="L259">		Iterator&lt;Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt;&gt; it = rel.entrySet().iterator();</span>
<span class="fc bfc" id="L260" title="All 2 branches covered.">		while (it.hasNext()) {</span>
			/// 找到原来的轨道
<span class="fc" id="L262">			Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt; entry = it.next();</span>
<span class="fc bfc" id="L263" title="All 2 branches covered.">			if (entry.getValue().contains(e)) {</span>
<span class="fc" id="L264">				track = entry.getKey();</span>
<span class="fc" id="L265">				array = entry.getValue();</span>
<span class="fc" id="L266">				array.remove(e);</span>
<span class="fc" id="L267">				it.remove();</span>
			}
		}
<span class="fc" id="L270">		rel.put(track, array);</span>

<span class="fc" id="L272">		Iterator&lt;Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt;&gt; its = rel.entrySet().iterator();</span>
<span class="fc bfc" id="L273" title="All 2 branches covered.">		while (its.hasNext()) {</span>
			/// 找到新的轨道
<span class="fc" id="L275">			Map.Entry&lt;Track, ArrayList&lt;Electron&gt;&gt; entry = its.next();</span>
<span class="fc bfc" id="L276" title="All 2 branches covered.">			if (entry.getKey().equals(t)) {</span>
<span class="fc" id="L277">				track = entry.getKey();</span>
<span class="fc" id="L278">				array = entry.getValue();</span>
<span class="fc" id="L279">				array.add(e);</span>
<span class="fc" id="L280">				its.remove();</span>
			}
		}
<span class="fc" id="L283">		rel.put(t, array);</span>
<span class="fc" id="L284">		rel2.put(e, t);</span>
//		e.setTrack(t);
<span class="fc" id="L286">	}</span>

	/**
	 * 存档
	 * 
	 * @return
	 * @throws ClassNotFoundException
	 * @throws IOException
	 */
	public AtomStructureMemento save() throws ClassNotFoundException, IOException {
<span class="fc" id="L296">		LogTest.logger.info(&quot;存档&quot;);</span>
<span class="fc" id="L297">		return (new AtomStructureMemento(rel, objects, tracks, numberOfTracks));</span>
	}

	/**
	 * 读档
	 * 
	 * @param memento 某存档
	 * @throws ClassNotFoundException
	 * @throws IOException
	 */
	public void recover(AtomStructureMemento memento) throws ClassNotFoundException, IOException {
<span class="fc" id="L308">		LogTest.logger.info(&quot;读档&quot;);</span>
<span class="fc" id="L309">		this.rel = memento.getRel();</span>
<span class="fc" id="L310">		this.objects = memento.getObjects();</span>
<span class="fc" id="L311">		this.tracks = memento.getTracks();</span>
<span class="fc" id="L312">		this.numberOfTracks = memento.getNumTracks();</span>
<span class="fc" id="L313">	}</span>

	/**
	 * 读取文件
	 */
	@Override
	public void readFile(File filename) throws IOException, MyException {
<span class="fc" id="L320">		LogTest.logger.info(&quot;读取&quot; + filename.toString() + &quot;文件&quot;);</span>
<span class="fc" id="L321">		FileReader fr = null;</span>
<span class="fc" id="L322">		BufferedReader br = null;</span>
<span class="fc" id="L323">		String read = null;</span>

<span class="fc" id="L325">		fr = new FileReader(filename);</span>
<span class="fc" id="L326">		br = new BufferedReader(fr);</span>
<span class="fc bfc" id="L327" title="All 2 branches covered.">		while ((read = br.readLine()) != null) {</span>
<span class="fc bfc" id="L328" title="All 2 branches covered.">			if (read.contains(&quot;ElementName&quot;)) {</span>
<span class="fc" id="L329">				elementNameSet(read);</span>
			}

<span class="fc bfc" id="L332" title="All 2 branches covered.">			if (read.contains(&quot;NumberOfTracks&quot;)) {</span>
<span class="fc bfc" id="L333" title="All 2 branches covered.">				if (read.contains(&quot;.&quot;)) {</span>
<span class="fc" id="L334">					throw new MyException(&quot;轨道数信息处不应该出现小数&quot;);</span>
				}
<span class="fc" id="L336">				numberOfTracksSet(read);</span>
			}

<span class="fc bfc" id="L339" title="All 2 branches covered.">			if (read.contains(&quot;NumberOfElectron&quot;)) {</span>
<span class="fc bfc" id="L340" title="All 2 branches covered.">				if (read.contains(&quot;.&quot;)) {</span>
<span class="fc" id="L341">					throw new MyException(&quot;电子/轨道信息处不应该出现小数&quot;);</span>
				}
<span class="fc" id="L343">				electronSet(read);</span>
			}
		}
<span class="fc" id="L346">		br.close();</span>
<span class="fc" id="L347">	}</span>

	private void electronSet(String read) throws MyException {
<span class="fc" id="L350">		int numberOfTracksCounter = 0;</span>
<span class="fc bfc" id="L351" title="All 2 branches covered.">		for (int i = 0; i &lt; read.length(); i++) {</span>
<span class="fc bfc" id="L352" title="All 2 branches covered.">			if (read.charAt(i) == ';') {</span>
<span class="fc" id="L353">				numberOfTracksCounter++;</span>
			}
		}

<span class="fc bfc" id="L357" title="All 2 branches covered.">		if (numberOfTracksCounter + 1 != numberOfTracks) {</span>
<span class="fc" id="L358">			throw new MyException(&quot;输入轨道数不匹配(依赖关系错误)&quot;);</span>
		}

<span class="fc" id="L361">		String[] deal_read = read.split(&quot;;&quot;);</span>

		/// 匹配还有问题
<span class="fc" id="L364">		String regex = &quot;([0-9]+)[\\\\/]([0-9]+)&quot;;</span>
<span class="fc" id="L365">		Pattern p = Pattern.compile(regex);</span>

<span class="fc" id="L367">		int counterElectron = 1;</span>
<span class="fc" id="L368">		int counter = 1;</span>
<span class="fc bfc" id="L369" title="All 2 branches covered.">		while (counter &lt;= numberOfTracks) {</span>
<span class="fc" id="L370">			Matcher m = p.matcher(deal_read[counter - 1]);</span>
<span class="pc bpc" id="L371" title="1 of 2 branches missed.">			if (m.find()) {</span>
				// 编号从1开始
<span class="fc" id="L373">				Track t = new Track(Integer.parseInt(m.group(1), 10));</span>
<span class="fc" id="L374">				addTrack(t);</span>

<span class="fc" id="L376">				int num = Integer.parseInt(m.group(2), 10);</span>

<span class="fc bfc" id="L378" title="All 2 branches covered.">				for (int i = 1; i &lt;= num; i++) {</span>
//					Electron e = new Electron(counterElectron, t);
<span class="fc" id="L380">					Electron e = new Electron(counterElectron);</span>
<span class="fc" id="L381">					rel2.put(e, t);</span>

<span class="fc" id="L383">					objects.add(e);</span>
<span class="fc" id="L384">					addObjectToTrack(t, e);</span>
<span class="fc" id="L385">					counterElectron++;</span>
				}
<span class="fc" id="L387">				counter++;</span>
			}
		}

<span class="fc" id="L391">	}</span>

	private void numberOfTracksSet(String read) throws MyException {
<span class="fc" id="L394">		String deal_read = null;</span>
<span class="fc" id="L395">		String regex = &quot;[0-9]+&quot;;</span>
<span class="fc" id="L396">		Pattern p = Pattern.compile(regex);</span>
<span class="fc" id="L397">		Matcher m = p.matcher(read);</span>

<span class="pc bpc" id="L399" title="1 of 2 branches missed.">		if (m.find()) {</span>
<span class="fc" id="L400">			deal_read = m.group();</span>
		}

<span class="fc" id="L403">		numberOfTracks = Integer.parseInt(deal_read, 10);</span>

<span class="fc bfc" id="L405" title="All 2 branches covered.">		if (numberOfTracks == 0) {</span>
<span class="fc" id="L406">			throw new MyException(&quot;轨道数不应为0&quot;);</span>
		}

<span class="fc" id="L409">	}</span>

	private void elementNameSet(String read) throws MyException {
<span class="fc" id="L412">		String deal_read = read.split(&quot;=&quot;)[1];</span>
<span class="fc" id="L413">		String regex = &quot;[//s]([a-zA-Z]+)[//s]&quot;;</span>
<span class="fc" id="L414">		Pattern p = Pattern.compile(regex);</span>
<span class="fc" id="L415">		Matcher m = p.matcher(read);</span>

<span class="pc bpc" id="L417" title="1 of 2 branches missed.">		if (m.find()) {</span>
<span class="nc" id="L418">			deal_read = m.group(1);</span>
		}

<span class="fc" id="L421">		String regex1 = &quot;([a-zA-Z]+)&quot;;</span>
<span class="fc" id="L422">		Pattern p1 = Pattern.compile(regex1);</span>
<span class="fc" id="L423">		Matcher m1 = p1.matcher(deal_read);</span>

<span class="pc bpc" id="L425" title="1 of 2 branches missed.">		if (m1.find()) {</span>
<span class="fc" id="L426">			deal_read = m1.group(0);</span>
		}

<span class="pc bpc" id="L429" title="1 of 4 branches missed.">		if (!(deal_read.charAt(0) &lt; 'Z' &amp;&amp; deal_read.charAt(0) &gt; 'A')) {</span>
<span class="fc" id="L430">			throw new MyException(&quot;元素名第一位应大写&quot;);</span>
		}

<span class="fc bfc" id="L433" title="All 2 branches covered.">		if (deal_read.length() != 2) {</span>
<span class="fc" id="L434">			throw new MyException(&quot;元素名长度错误&quot;);</span>
		}

<span class="fc" id="L437">		elementName = deal_read;</span>
<span class="fc" id="L438">		setCentralObject(new CentralAtom(elementName));</span>
<span class="fc" id="L439">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span>myTest (2019-5-15 16:08:01)</div></body></html>